Практика по Bash-скриптированию
Задачи выполнены 11.02.2026
Задача 1: Системный монитор с управлением
Цель: Использовать условия (if-else или case), циклы (while/until) и функции.

Файл: system_monitor.sh

Описание: Скрипт предоставляет интерактивное меню для мониторинга системы с возможностью проверки использования диска, памяти и процессов текущего пользователя.

Код:

bash
#!/bin/bash
show_menu() {
       cat >&2 <<EOF
    1. Проверить использование диска
    2. Проверить использование памяти
    3. Проверить запущенные процессы текущего пользователя
    4. Выйти
    --------------------
EOF
    echo >&2 -n "Выберите пункт меню(от 1 до 4х): "
    read INPUT
    echo $INPUT
}
while true;
do
VAR=$(show_menu)
echo
  case $VAR in
   1)
     echo "----------Использование диска----------"
     df -h
     echo
     ;;
   2)
     echo "----------Использование памяти----------"
     free -h
     echo
     ;;
   3)
     echo "----------Процессы пользователя----------"
     ps aux | grep $USER
     echo
     ;;
   4)
     break;;
   *)
     echo "Неверный выбор, вводите только числа от 1го до 4х"
     echo
     ;;
  esac
done
Пример вывода:

text
./system_monitor.sh
    1. Проверить использование диска
    2. Проверить использование памяти
    3. Проверить запущенные процессы текущего пользователя
    4. Выйти
    --------------------
Выберите пункт меню(от 1 до 4х): 2

----------Использование памяти----------
               total        used        free      shared  buff/cache   available
Mem:           3.8Gi       1.1Gi       2.0Gi        38Mi       965Mi       2.7Gi
Swap:             0B          0B          0B

    1. Проверить использование диска
    2. Проверить использование памяти
    3. Проверить запущенные процессы текущего пользователя
    4. Выйти
    --------------------
Выберите пункт меню(от 1 до 4х): 4
Изучаемые темы:

Использование case для обработки выбора пользователя

Бесконечный цикл while с break для выхода

Функции (show_menu для вывода меню)

Базовые системные команды (df, free, ps, grep)

Условия для проверки ввода

Задача 2: Анализатор лог-файла
Цель: Работа с массивами, циклами for и условиями с регулярными выражениями.

Файл: log_analyzer.sh

Описание: Скрипт анализирует лог-файл, подсчитывает количество записей разных типов (INFO, WARNING, ERROR) и выводит статистику с использованием ассоциативного массива.

Код:

bash
#!/bin/bash
LOGS=$(cat ./logs/sample.log)
ERRORCNT=0
INFOCNT=0
WARNCNT=0
for line in $LOGS;
do
 if [[ $line =~ ^ERROR ]]; then
    ((ERRORCNT++))
 elif [[ $line =~ ^INFO ]]; then
    ((INFOCNT++))
 elif [[ $line =~ ^WARNING ]]; then
    ((WARNCNT++))
fi
done
declare -A stats
stats["INFO"]="$INFOCNT"
stats["WARNING"]="$WARNCNT"
stats["ERROR"]="$ERRORCNT"
echo "Анализ лога завершен:" && echo
for key in ${!stats[@]};
do
  echo "$key: ${stats[$key]}"
done
Пример вывода:

text
Анализ лога завершен:

ERROR: 2
INFO: 2
WARNING: 1
Структура тестового лог-файла (sample.log):

text
INFO: User admin logged in
ERROR: Disk full
INFO: Backup completed
WARNING: High CPU usage
ERROR: Network timeout
Изучаемые темы:

Работа с массивами (включая ассоциативные массивы)

Цикл for для итерации по данным

Условия if-else с регулярными выражениями (=~)

Арифметические операции (( ))

Чтение файлов и обработка строк

Выводы и рекомендации
Что сделано хорошо:

Оба скрипта работают корректно и выполняют поставленные задачи

Чистая структура кода с использованием функций

Правильное применение case для обработки меню

Успешное использование ассоциативных массивов (дополнительное задание)

Хорошее форматирование вывода

Рекомендации по улучшению:

Для system_monitor.sh:

Использовать ps -u $USER вместо ps aux | grep $USER для исключения процесса grep из вывода

Добавить проверку существования необходимых команд

Рассмотреть использование цикла until как указано в задании

Для log_analyzer.sh:

Использовать цикл while read вместо for для корректного чтения файла построчно:

bash
while IFS= read -r line; do
    # обработка строки
done < "./logs/sample.log"
Добавить проверку существования файла перед чтением

Можно сразу инициализировать счетчики в ассоциативном массиве

Общий итог: Задачи успешно выполнены, скрипты работают корректно. Код демонстрирует хорошее понимание основных концепций Bash-скриптирования: условий, циклов, функций и работы с системными командами.